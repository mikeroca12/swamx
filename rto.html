<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rejected Takeoff (RTO) Decision Tool</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=DM+Sans:wght@400;500;600;700&family=Outfit:wght@700;900&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #1b2a45;
  --frame: #223352;
  --frame-border: #2e4368;
  --surface: #e2e7ef;
  --surface2: #d9dee8;
  --border: #c8ceda;
  --border-strong: #b4bcc9;
  --text: #1e293b;
  --text-secondary: #475569;
  --text-dim: #64748b;
  --text-on-dark: #e2e8f0;
  --text-on-dark-dim: #ffffff;
  --green: #16a34a;
  --green-bg: #dcfce7;
  --green-border: #86efac;
  --yellow: #d97706;
  --yellow-bg: #fef3c7;
  --yellow-border: #fcd34d;
  --red: #dc2626;
  --red-bg: #fee2e2;
  --red-border: #fca5a5;
  --blue: #2563eb;
  --accent: #2563eb;
  --card-shadow: 0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04);
  --card-shadow-hover: 0 4px 12px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.04);
}
* { margin:0; padding:0; box-sizing:border-box; }
body { background:var(--bg); color:var(--text); font-family:'DM Sans',sans-serif; min-height:100vh; line-height:1.5; }

/* NAV */
.moc-nav {
  background:var(--frame); border-bottom:1px solid var(--frame-border);
  padding:10px 24px; display:flex; align-items:center; gap:12px;
}
.moc-nav a { display:flex; align-items:center; gap:10px; text-decoration:none; color:var(--text-on-dark-dim); font-size:13px; font-weight:500; transition:color 0.15s; }
.moc-nav a:hover { color:var(--text-on-dark); }
.moc-nav img { height:28px; width:auto; }
.moc-nav .nav-logo-text { display:flex; flex-direction:column; }
.moc-nav .nav-title { font-family:'Outfit',sans-serif; font-weight:900; color:var(--text-on-dark); font-size:14px; line-height:1.2; }
.moc-nav .nav-title span { color:#3b82f6; }
.moc-nav .nav-ref { font-family:'JetBrains Mono',monospace; font-size:7px; font-weight:600; letter-spacing:1.5px; color:#ef4444; text-transform:uppercase; font-style:italic; }
.moc-nav .nav-sep { color:var(--frame-border); font-size:16px; }

/* HEADER */
.header {
  background:var(--frame); border-bottom:1px solid var(--frame-border);
  padding:16px 24px; display:flex; align-items:center; justify-content:space-between;
  position:sticky; top:0; z-index:100;
}
.header-left { display:flex; align-items:center; gap:16px; flex-wrap:wrap; }
.header h1 { font-family:'JetBrains Mono',monospace; font-size:16px; font-weight:700; letter-spacing:-0.5px; color:var(--text-on-dark); }
.header-ref { font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--text-on-dark-dim); background:rgba(255,255,255,0.08); padding:4px 10px; border-radius:4px; border:1px solid var(--frame-border); }
.reset-btn { background:rgba(255,255,255,0.1); border:1px solid var(--frame-border); color:var(--text-on-dark-dim); font-family:'DM Sans',sans-serif; font-size:13px; padding:6px 14px; border-radius:6px; cursor:pointer; transition:all 0.15s; }
.reset-btn:hover { background:rgba(255,255,255,0.15); color:var(--text-on-dark); }

/* CONTAINER */
.container { max-width:720px; margin:0 auto; padding:32px 24px 80px; }

/* PROGRESS */
.progress-bar { display:flex; gap:4px; margin-bottom:32px; }
.progress-bar .step { flex:1; height:4px; background:var(--surface); border-radius:2px; transition:background 0.3s; }
.progress-bar .step.active { background:var(--accent); }
.progress-bar .step.done { background:var(--green); }

/* STEPS */
.step-section { display:none; animation:fadeIn 0.25s ease; }
.step-section.active { display:block; }
@keyframes fadeIn { from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:translateY(0)} }

.step-top-row { display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
.step-label { font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--text-on-dark-dim); text-transform:uppercase; letter-spacing:1.5px; }
.back-btn { font-family:'DM Sans',sans-serif; font-size:13px; color:var(--text-secondary); background:var(--surface); border:1px solid var(--border); padding:4px 12px; border-radius:6px; cursor:pointer; transition:all 0.15s; box-shadow:var(--card-shadow); }
.back-btn:hover { color:var(--text); border-color:var(--accent); }

.step-question { font-size:22px; font-weight:700; margin-bottom:8px; line-height:1.3; color:var(--text-on-dark); }
.step-hint { font-size:13px; color:var(--text-on-dark-dim); margin-bottom:24px; line-height:1.6; }

/* OPTIONS */
.options { display:flex; flex-direction:column; gap:8px; }
.option-btn {
  background:var(--surface); border:1px solid var(--border); color:var(--text);
  font-family:'DM Sans',sans-serif; font-size:15px; font-weight:500;
  padding:16px 20px; border-radius:10px; cursor:pointer; text-align:left;
  transition:all 0.15s; display:flex; align-items:flex-start; gap:12px;
  box-shadow:var(--card-shadow);
}
.option-btn:hover { background:var(--surface2); border-color:var(--accent); box-shadow:var(--card-shadow-hover); }
.option-btn .key { font-family:'JetBrains Mono',monospace; font-size:11px; background:var(--surface2); border:1px solid var(--border); padding:2px 8px; border-radius:4px; color:var(--text-dim); flex-shrink:0; margin-top:2px; }
.option-btn .option-content { display:flex; flex-direction:column; }
.option-btn .option-sub { font-size:12px; color:var(--text-dim); font-weight:400; margin-top:2px; }

/* SUMMARY */
.summary-strip {
  background:var(--surface); border:1px solid var(--border); border-radius:10px;
  padding:16px 20px; margin-bottom:24px; display:none; box-shadow:var(--card-shadow);
}
.summary-strip.visible { display:block; }
.summary-strip .summary-title { font-family:'JetBrains Mono',monospace; font-size:10px; color:var(--text-dim); text-transform:uppercase; letter-spacing:1.5px; margin-bottom:8px; }
.summary-items { display:flex; flex-wrap:wrap; gap:6px 16px; }
.summary-item { font-size:13px; color:var(--text-dim); }
.summary-item span { color:var(--text); font-weight:600; }

/* RESULT */
.result-answer { border-radius:12px; padding:28px; margin-bottom:20px; border:2px solid; box-shadow:var(--card-shadow); }
.result-answer.fly { background:var(--green-bg); border-color:var(--green-border); }
.result-answer.defer { background:var(--yellow-bg); border-color:var(--yellow-border); }
.result-answer.ground { background:var(--red-bg); border-color:var(--red-border); }
.result-answer .ra-badge { font-family:'JetBrains Mono',monospace; font-size:14px; font-weight:700; letter-spacing:1.5px; text-transform:uppercase; margin-bottom:12px; }
.result-answer.fly .ra-badge { color:var(--green); }
.result-answer.defer .ra-badge { color:var(--yellow); }
.result-answer.ground .ra-badge { color:var(--red); }
.result-answer .ra-action { font-size:18px; font-weight:700; margin-bottom:16px; line-height:1.4; color:var(--text); }
.result-answer .ra-line { font-size:14px; line-height:1.7; padding:4px 0; }
.result-answer .ra-line strong { color:var(--text); }
.result-answer.fly .ra-line { color:#15803d; }
.result-answer.defer .ra-line { color:#92400e; }
.result-answer.ground .ra-line { color:#991b1b; }
.ra-divider { border:none; border-top:1px solid rgba(0,0,0,0.08); margin:14px 0; }

/* DETAILS ACCORDION */
.details-toggle {
  background:var(--surface); border:1px solid var(--border); border-radius:10px;
  padding:14px 20px; cursor:pointer; display:flex; align-items:center;
  justify-content:space-between; transition:all 0.15s; margin-bottom:4px;
  width:100%; color:var(--text); font-family:'DM Sans',sans-serif;
  font-size:14px; font-weight:600; box-shadow:var(--card-shadow);
}
.details-toggle:hover { background:var(--surface2); }
.details-toggle .arrow { transition:transform 0.2s; font-size:12px; color:var(--text-dim); }
.details-toggle.open .arrow { transform:rotate(180deg); }
.details-toggle.open { border-radius:10px 10px 0 0; margin-bottom:0; }
.details-content {
  display:none; background:var(--surface); border:1px solid var(--border);
  border-top:none; border-radius:0 0 10px 10px; padding:20px;
  margin-top:-4px; margin-bottom:12px;
}
.details-content.open { display:block; }
.detail-text { font-size:13px; color:var(--text-secondary); line-height:1.7; }
.detail-text strong { color:var(--text); }

/* REF IMAGES */
.ref-img { width:100%; border-radius:8px; border:1px solid var(--border); margin:10px 0; }

/* CONSIDERATIONS */
.consideration-list { list-style:none; padding:0; }
.consideration-list li {
  padding:10px 14px; margin-bottom:6px; background:rgba(37,99,235,0.04);
  border:1px solid rgba(37,99,235,0.1); border-radius:8px; font-size:13px;
  color:var(--text-secondary); line-height:1.6;
}
.consideration-list li strong { color:var(--text); }

/* REFS SECTION */
.ref-tags { display:flex; flex-wrap:wrap; gap:6px; margin-top:16px; }
.ref-tag {
  font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--accent);
  padding:4px 10px; border-radius:5px; background:rgba(37,99,235,0.06);
  border:1px solid rgba(37,99,235,0.15);
}

@media print {
  body { background:white; }
  .header,.reset-btn,.back-btn,.progress-bar,.moc-nav { display:none; }
  .details-content { display:block !important; }
}
@media (max-width:600px) {
  .header { flex-direction:column; gap:8px; align-items:flex-start; }
  .header h1 { font-size:14px; }
  .step-question { font-size:18px; }
}
</style>
</head>
<body>
<div class="moc-nav">
  <a href="index.html">
    <img src="logo.webp" alt="MOC">
    <div class="nav-logo-text">
      <span class="nav-title">MOC <span>Toolbox</span></span>
      <span class="nav-ref">For reference use only</span>
    </div>
  </a>
  <span class="nav-sep">|</span>
  <a href="index.html">Back to Apps</a>
</div>

<div class="header">
  <div class="header-left">
    <h1>REJECTED TAKEOFF (RTO)</h1>
    <span class="header-ref">ATA 05 | AOM 5.18.7 | FOM 22.1.2 | FRM 2.4.2.1</span>
  </div>
  <button class="reset-btn" onclick="resetAll()">Start Over</button>
</div>

<div class="container">
  <div class="progress-bar" id="progressBar">
    <div class="step" data-step="1"></div>
    <div class="step" data-step="2"></div>
    <div class="step" data-step="3"></div>
  </div>

  <div class="summary-strip" id="summaryStrip">
    <div class="summary-title">Selections</div>
    <div class="summary-items" id="summaryItems"></div>
  </div>

  <!-- STEP 1: Speed -->
  <div class="step-section active" id="step1">
    <div class="step-top-row">
      <div class="step-label">Step 1 of 3</div>
    </div>
    <div class="step-question">What speed was the takeoff rejected?</div>
    <div class="step-hint">This determines the reporting chain, inspection requirements, and brake cooling obligations.</div>
    <div class="options">
      <button class="option-btn" onclick="selectSpeed('above80')">
        <span class="key">A</span>
        <div class="option-content">
          <div>80 knots or greater</div>
          <div class="option-sub">High-speed RTO -- Conference call required. CAPT > DISP > SOD > COD > CPNOC. Conditional inspection may be required.</div>
        </div>
      </button>
      <button class="option-btn" onclick="selectSpeed('below80')">
        <span class="key">B</span>
        <div class="option-content">
          <div>Less than 80 knots</div>
          <div class="option-sub">Low-speed RTO -- CAPT > DISP > SOD. Crew determines brake cooling. Conditional inspection NOT required.</div>
        </div>
      </button>
    </div>
  </div>

  <!-- STEP 2: Brake Energy (only for above 80) -->
  <div class="step-section" id="step2">
    <div class="step-top-row">
      <div class="step-label">Step 2 of 3</div>
      <button class="back-btn" onclick="goBack(1)">Back</button>
    </div>
    <div class="step-question">Was brake energy greater than 30 million ft/lb?</div>
    <div class="step-hint">Determine via AMM/AOM charts or the Brake Cooling Module. If crew programs the module, it generates ft/lb directly -- no charts needed. Check ACARS MSG DISPLAY page 2/2 if warning text is long.</div>
    <div class="options">
      <button class="option-btn" onclick="selectEnergy('above30')">
        <span class="key">A</span>
        <div class="option-content">
          <div>Yes -- Above 30 million ft/lb</div>
          <div class="option-sub">High-energy stop. Logbook fault entry required. Conditional inspection required per FOM 19.2.6.3.</div>
        </div>
      </button>
      <button class="option-btn" onclick="selectEnergy('below30')">
        <span class="key">B</span>
        <div class="option-content">
          <div>No -- 30 million ft/lb or less</div>
          <div class="option-sub">Not a high-energy stop. Comply with brake cooling times. No conditional inspection required for brake energy.</div>
        </div>
      </button>
      <button class="option-btn" onclick="selectEnergy('unknown')">
        <span class="key">C</span>
        <div class="option-content">
          <div>Unknown -- Unable to determine</div>
          <div class="option-sub">Crew unable to run brake cooling module or obtain charts. Treat conservatively.</div>
        </div>
      </button>
    </div>
  </div>

  <!-- STEP 3: Method (for above 80 + above 30) -->
  <div class="step-section" id="step3">
    <div class="step-top-row">
      <div class="step-label">Step 3 of 3</div>
      <button class="back-btn" onclick="goBack(2)">Back</button>
    </div>
    <div class="step-question">How was brake energy determined?</div>
    <div class="step-hint">The brake cooling module generates the ft/lb value directly. AMM/AOM charts require manual calculation.</div>
    <div class="options">
      <button class="option-btn" onclick="selectMethod('module')">
        <span class="key">A</span>
        <div class="option-content">
          <div>Brake Cooling Module (ACARS / Flight Suite)</div>
          <div class="option-sub">AOM 17.8.1 (ACARS MDCU) or AOM 17.8.2.1 (Crew iPad Flight Suite App). Module auto-generates ft/lb.</div>
        </div>
      </button>
      <button class="option-btn" onclick="selectMethod('charts')">
        <span class="key">B</span>
        <div class="option-content">
          <div>AMM / AOM Charts</div>
          <div class="option-sub">Manual calculation using AOM 18.4.13 brake cooling schedule or AMM charts.</div>
        </div>
      </button>
    </div>
  </div>

  <!-- RESULT -->
  <div class="step-section" id="resultSection">
    <div class="step-top-row">
      <div class="step-label">Result</div>
      <button class="back-btn" onclick="goBackFromResult()">Back</button>
    </div>
    <div id="resultContent"></div>
  </div>
</div>

<script>
var state = { speed: null, energy: null, method: null };

function selectSpeed(val) {
  state.speed = val;
  if (val === 'below80') {
    state.energy = null;
    state.method = null;
    showResult();
  } else {
    showStep(2);
  }
}

function selectEnergy(val) {
  state.energy = val;
  if (val === 'above30') {
    showStep(3);
  } else {
    state.method = null;
    showResult();
  }
}

function selectMethod(val) {
  state.method = val;
  showResult();
}

function showStep(num) {
  document.querySelectorAll('.step-section').forEach(s => s.classList.remove('active'));
  document.getElementById('step' + num).classList.add('active');
  updateProgress(num);
  updateSummary();
}

function showResult() {
  document.querySelectorAll('.step-section').forEach(s => s.classList.remove('active'));
  document.getElementById('resultSection').classList.add('active');
  updateProgress(4);
  updateSummary();
  renderResult();
}

function goBack(toStep) {
  if (toStep === 1) { state.speed = null; state.energy = null; state.method = null; }
  if (toStep === 2) { state.energy = null; state.method = null; }
  showStep(toStep);
}

function goBackFromResult() {
  if (state.speed === 'below80') { goBack(1); return; }
  if (state.energy === 'below30' || state.energy === 'unknown') { state.energy = null; showStep(2); return; }
  if (state.method) { state.method = null; showStep(3); return; }
  goBack(1);
}

function resetAll() {
  state = { speed: null, energy: null, method: null };
  showStep(1);
  document.getElementById('summaryStrip').classList.remove('visible');
}

function updateProgress(currentStep) {
  var steps = document.querySelectorAll('.progress-bar .step');
  var total = (state.speed === 'below80') ? 1 : (state.energy !== 'above30') ? 2 : 3;
  steps.forEach(function(s, i) {
    var n = i + 1;
    s.classList.remove('active', 'done');
    if (currentStep === 4) { s.classList.add('done'); }
    else if (n < currentStep) { s.classList.add('done'); }
    else if (n === currentStep) { s.classList.add('active'); }
  });
}

function updateSummary() {
  var strip = document.getElementById('summaryStrip');
  var items = document.getElementById('summaryItems');
  var html = '';
  if (state.speed) {
    html += '<div class="summary-item">Speed: <span>' + (state.speed === 'above80' ? '80+ kts' : '< 80 kts') + '</span></div>';
  }
  if (state.energy) {
    var eLabel = state.energy === 'above30' ? '> 30M ft/lb' : state.energy === 'below30' ? '< 30M ft/lb' : 'Unknown';
    html += '<div class="summary-item">Brake Energy: <span>' + eLabel + '</span></div>';
  }
  if (state.method) {
    html += '<div class="summary-item">Method: <span>' + (state.method === 'module' ? 'Brake Cooling Module' : 'AMM/AOM Charts') + '</span></div>';
  }
  items.innerHTML = html;
  strip.classList.toggle('visible', html.length > 0);
}

function renderResult() {
  var rc = document.getElementById('resultContent');
  var html = '';

  if (state.speed === 'below80') {
    html += resultCard('fly', 'LOW-SPEED RTO', 'No Conditional Inspection Required',
      '<div class="ra-line">RTO below 80 knots. <strong>Crew determines their own brake cooling requirements.</strong></div>' +
      '<div class="ra-line">No conditional inspection required for brake energy.</div>' +
      '<hr class="ra-divider">' +
      '<div class="ra-line"><strong>Reporting chain:</strong> CAPT > DISP > SOD</div>' +
      '<div class="ra-line"><strong>Logbook entry:</strong> As required</div>'
    );
    html += refSection();
  }
  else if (state.energy === 'below30') {
    html += resultCard('defer', 'HIGH-SPEED RTO -- BELOW 30M FT/LB', 'No Conditional Inspection for Brake Energy',
      '<div class="ra-line">RTO at 80+ knots but brake energy is <strong>at or below 30 million ft/lb</strong>. Not classified as a high-energy stop.</div>' +
      '<div class="ra-line"><strong>Comply with all brake cooling times and advisory information.</strong></div>' +
      '<hr class="ra-divider">' +
      '<div class="ra-line"><strong>Reporting chain:</strong> CAPT > DISP > SOD > COD > CPNOC</div>' +
      '<div class="ra-line"><strong>Conf call:</strong> DISP, SOD, CAPT, CPNOC, MX CTRL -- SOD must ensure conference call occurs</div>' +
      '<div class="ra-line"><strong>Logbook entry:</strong> As required</div>'
    );
    html += considerationsSection();
    html += refSection();
  }
  else if (state.energy === 'unknown') {
    html += resultCard('ground', 'HIGH-SPEED RTO -- ENERGY UNKNOWN', 'Treat as High-Energy Stop Until Determined',
      '<div class="ra-line">RTO at 80+ knots. Brake energy <strong>cannot be determined</strong>.</div>' +
      '<div class="ra-line"><strong>Treat conservatively as high-energy stop until brake cooling module or charts confirm otherwise.</strong></div>' +
      '<div class="ra-line">Contact Dispatch to coordinate brake cooling calculation.</div>' +
      '<hr class="ra-divider">' +
      '<div class="ra-line"><strong>Reporting chain:</strong> CAPT > DISP > SOD > COD > CPNOC</div>' +
      '<div class="ra-line"><strong>Conf call:</strong> DISP, SOD, CAPT, CPNOC, MX CTRL</div>' +
      '<div class="ra-line"><strong>Logbook entry:</strong> Required -- document inability to determine brake energy</div>'
    );
    html += considerationsSection();
    html += refSection();
  }
  else if (state.energy === 'above30') {
    html += resultCard('ground', 'HIGH-ENERGY STOP', 'Conditional Inspection Required -- Logbook Fault Entry Required',
      '<div class="ra-line">RTO at 80+ knots with brake energy <strong>exceeding 30 million ft/lb</strong>.</div>' +
      '<div class="ra-line"><strong>Aircraft logbook fault entry is REQUIRED.</strong></div>' +
      '<div class="ra-line"><strong>Conditional inspection required per FOM 19.2.6.3.</strong></div>' +
      '<hr class="ra-divider">' +
      '<div class="ra-line"><strong>Reporting chain:</strong> CAPT > DISP > SOD > COD > CPNOC</div>' +
      '<div class="ra-line"><strong>Conf call:</strong> DISP, SOD, CAPT, CPNOC, MX CTRL -- SOD must ensure conference call occurs</div>' +
      '<div class="ra-line"><strong>Logbook entry:</strong> REQUIRED</div>' +
      '<div class="ra-line"><strong>Method used:</strong> ' + (state.method === 'module' ? 'Brake Cooling Module (ACARS/Flight Suite)' : 'AMM/AOM Charts') + '</div>'
    );
    html += considerationsSection();
    html += mqtwSection();
    html += brakeCoolingTipsSection();
    html += refSection();
  }

  rc.innerHTML = html;
  attachToggles();
}

function resultCard(type, badge, action, body) {
  return '<div class="result-answer ' + type + '">' +
    '<div class="ra-badge">' + badge + '</div>' +
    '<div class="ra-action">' + action + '</div>' +
    body + '</div>';
}

function considerationsSection() {
  return '<button class="details-toggle" data-target="considerations-content">AOM Considerations <span class="arrow">&#9660;</span></button>' +
    '<div class="details-content" id="considerations-content">' +
    '<ul class="consideration-list">' +
    '<li>Request tower personnel <strong>alert the fire department</strong> as required. Request visual inspection for signs of smoke or fire.</li>' +
    '<li>If fire is present, the Captain should consider <strong>positioning the aircraft upwind</strong> of the fire.</li>' +
    '<li>Consider: <strong>wheel fuse plugs melting</strong>, need to clear the runway, requirement for remote parking, not setting the parking brake unless passenger evacuation is necessary.</li>' +
    '<li>Prior to another takeoff attempt or further taxi, <strong>determine brake cooling requirements</strong>. If unable, contact Dispatch. Additional heat buildup from taxiing may aggravate the brake energy situation.</li>' +
    '<li>Coordinate with <strong>ATC and Station Operations</strong> for remote parking requirements. Advise of hot brake hazard and fuse plug melt risk. Request nose gear chocking to keep aircraft stationary without wheel brakes.</li>' +
    '<li><strong>Aircraft logbook fault entry required if brake energy exceeds 30.0 million ft/lb.</strong></li>' +
    '</ul>' +
    '<img src="rto-images/image5.png" class="ref-img" alt="AOM 5.18.7 Considerations">' +
    '</div>';
}

function mqtwSection() {
  return '<button class="details-toggle" data-target="mqtw-content">MQTW & Brake Cooling Key Points <span class="arrow">&#9660;</span></button>' +
    '<div class="details-content" id="mqtw-content">' +
    '<div class="detail-text">' +
    '<p><strong>What is MQTW?</strong></p>' +
    '<p>Maximum Quick Turnaround Weight -- the max weight with <strong>no</strong> minimum ground time required to ensure tire fuse plugs do not melt. Assumes maximum manual braking to a full stop with no reverse thrust.</p>' +
    '<p style="margin-top:10px"><strong>Exceeding MQTW requires minimum ground time:</strong></p>' +
    '<ul style="margin:8px 0 8px 20px;color:var(--text-secondary)">' +
    '<li><strong>-800 / MAX 8:</strong> 48 minutes</li>' +
    '<li><strong>-700:</strong> 62 minutes</li>' +
    '</ul>' +
    '<p>After ground time, verify no tires have deflated per AOM 12.2.2. Ground crews can still work during required ground time, provided brake cooling module does not stipulate restrictions.</p>' +
    '<p style="margin-top:10px"><strong>Exceeding MQTW is NOT a high-energy stop.</strong> A high-energy stop is 30 million ft/lb per FOM 19.3.6.3.</p>' +
    '<p style="margin-top:14px"><strong>To reduce brake energy absorbed:</strong></p>' +
    '<ul style="margin:8px 0 8px 20px;color:var(--text-secondary)">' +
    '<li>Immediately apply reverse thrust after touchdown (minimum detent 2)</li>' +
    '<li>Use lowest autobrake setting, disengage at 60 kts</li>' +
    '<li>If manual braking, follow AOM 12.1.1 Normal Landing</li>' +
    '<li>Avoid first high-speed exit -- let aircraft roll to the next one</li>' +
    '</ul>' +
    '<p style="margin-top:10px"><strong>To avoid MQTW altogether:</strong> Use flaps 40, avoid tailwind runways, try different runways (slope changes MQTW).</p>' +
    '<img src="rto-images/image3.png" class="ref-img" alt="ACARS MQTW brake cooling example">' +
    '</div></div>';
}

function brakeCoolingTipsSection() {
  return '<button class="details-toggle" data-target="brkcool-content">Brake Cooling Module Tips <span class="arrow">&#9660;</span></button>' +
    '<div class="details-content" id="brkcool-content">' +
    '<div class="detail-text">' +
    '<p><strong>When using the Brake Cooling Module, ensure accurate entries:</strong></p>' +
    '<p style="margin-top:10px"><strong>BRAKING field:</strong> Select the correct autobrake setting if used. Default is "MANUAL" which assumes <strong>maximum manual braking</strong> -- keep this in mind when entering brakes on speed.</p>' +
    '<p style="margin-top:8px"><strong>BRKS ON SPEED:</strong> N/A if autobrakes used. If manual, enter the actual speed when braking began. Default is Vref which gives more stringent results than necessary if braking actually started at a lower speed.</p>' +
    '<p style="margin-top:8px"><strong>For RTO:</strong> Manual entry of takeoff weight is required. The module auto-populates LDW from the ACARS LD CONDITIONS page.</p>' +
    '<p style="margin-top:8px"><strong>Brake energy may be on page 2/2</strong> if warning text is too long after module is programmed.</p>' +
    '<img src="rto-images/image9.png" class="ref-img" alt="ACARS brake cooling display example">' +
    '<img src="rto-images/image4.png" class="ref-img" alt="Brake cooling module example">' +
    '</div></div>';
}

function refSection() {
  return '<button class="details-toggle" data-target="refs-content">Manual References <span class="arrow">&#9660;</span></button>' +
    '<div class="details-content" id="refs-content">' +
    '<div class="detail-text">' +
    '<p><strong>Primary References:</strong></p>' +
    '<div class="ref-tags">' +
    '<span class="ref-tag">AOM 5.18.7 RTO Procedure</span>' +
    '<span class="ref-tag">AOM 17.8.1 PWB Brake Cooling (ACARS MDCU)</span>' +
    '<span class="ref-tag">AOM 17.8.2.1 Flight Suite RTO</span>' +
    '<span class="ref-tag">AOM 12.2.2 MQTW Procedures</span>' +
    '<span class="ref-tag">AOM 18.4.13 Brake Cooling Schedule</span>' +
    '<span class="ref-tag">FOM 19.2.6.3 Conditional Inspections</span>' +
    '<span class="ref-tag">FOM 22.1.2 Event Reporting Table</span>' +
    '<span class="ref-tag">FRM 2.4.2.1 Brake Cooling for RTO</span>' +
    '</div>' +
    '<img src="rto-images/image8.png" class="ref-img" alt="FOM Table 22.1.2 - RTO Event Reporting" style="margin-top:16px">' +
    '<img src="rto-images/imagea.png" class="ref-img" alt="FRM 2.4.2.1 Brake Cooling for Rejected Takeoff">' +
    '</div></div>';
}

function attachToggles() {
  document.querySelectorAll('.details-toggle').forEach(function(btn) {
    btn.addEventListener('click', function() {
      var target = document.getElementById(this.getAttribute('data-target'));
      this.classList.toggle('open');
      target.classList.toggle('open');
    });
  });
}
</script>
</body>
</html>
